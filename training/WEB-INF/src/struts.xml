<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>

	<!-- アクセスの際にhtmlの拡張子を付ける定義 -->
	<constant name="struts.action.extension" value="html" />
	<constant name="struts.enable.DynamicMethodInvocation" value="false" />
	<constant name="struts.devMode" value="true" />

	<!-- メッセージプロパティの設定(複数の場合はカンマ[,]区切り) -->
	<constant name="struts.custom.i18n.resources" value="messages" />

	<constant name="struts.ui.theme" value="simple" />
	<constant name="struts.configuration.xml.reload" value="true" />
	<constant name="struts.codebehind.defaultPackage" value="master_login" />
	<!-- 独自パッケージとして「master_login」を定義 -->
	
	<package name="master_tiles" namespace="/master" extends="struts-default">
		<result-types>
			<result-type name="tiles"
				class="org.apache.struts2.views.tiles.TilesResult" />
		</result-types>
	</package>
	
	<package name="master_login" namespace="/master" extends="master_tiles">		
		<interceptors>
			<!-- LoginMasterInterceptorクラスに対して「login」と名前を定義 -->
			<interceptor name="master_login" class="controllers.interceptors.LoginMasterInterceptor" />
			<!-- LoginMasterInterceptorとStruts標準のdefaultStackを 足し合わせた新しい「defaultMasterLoginStack」を定義 -->
			<interceptor-stack name="defaultMasterLoginStack">
				<interceptor-ref name="master_login" />
				<interceptor-ref name="fileUpload">
					<param name="maximumSize">2097152</param>
					<param name="allowedTypes">image/png</param>
				</interceptor-ref>
				<interceptor-ref name="defaultStack" />				
			</interceptor-stack>
		</interceptors>
		<!-- デフォルトのinterceptorを、defaultMasterLoginStackに設定 -->
		<default-interceptor-ref name="defaultMasterLoginStack" />
		<!-- 「return "login"」「return "mainmenu"」に対して、固定のＵＲＬを定義 -->		
		
		<global-results>
			<!-- <result name="master_login" type="tiles">tiles.A_3</result> -->
			<result name="master_login">/views/auth/login.jsp</result>
		</global-results>
		<!-- actionタグは記述不要 -->
	</package>

	<constant name="struts.codebehind.defaultPackage" value="develop_login" />
	<!-- 独自パッケージとして「develop_login」を定義 -->
	<package name="develop_login" namespace="/develop" extends="struts-default">
		<interceptors>
			<!-- LoginDevelopInterceptorクラスに対して「login」と名前を定義 -->
			<interceptor name="develop_login" class="controllers.interceptors.LoginDevelopInterceptor" />
			<!-- LoginDevelopInterceptorとStruts標準のdefaultStackを 足し合わせた新しい「defaultDevelopLoginStack」を定義 -->
			<interceptor-stack name="defaultDevelopLoginStack">
				<interceptor-ref name="develop_login" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		</interceptors>
		<!-- デフォルトのinterceptorを、defaultDevelopLoginStackに設定 -->
		<default-interceptor-ref name="defaultDevelopLoginStack" />
		<!-- 「return "login"」「return "mainmenu"」に対して、固定のＵＲＬを定義 -->
		<global-results>
			<result name="develop_login">/develop/index.jsp</result>
			<result name="mainmenu" type="redirect">mainMenu.action</result>
		</global-results>
		<!-- actionタグは記述不要 -->
	</package>

	<constant name="struts.codebehind.defaultPackage" value="customer_login" />
	<package name="customer_tiles" namespace="customer" extends="struts-default">
                <result-types>
                        <result-type name="tiles"
                                class="org.apache.struts2.views.tiles.TilesResult" />
                </result-types>
        </package>
	<!-- 独自パッケージとして「customer_login」を定義 -->
	<package name="customer_login" namespace="/customer" extends="customer_tiles">
		<interceptors>
			<!-- LoginCustomerInterceptorクラスに対して「login」と名前を定義 -->
			<interceptor name="customer_login" class="controllers.interceptors.LoginCustomerInterceptor" />
			<!-- LoginCustomerInterceptorとStruts標準のdefaultStackを 足し合わせた新しい「defaultCustomerLoginStack」を定義 -->
			<interceptor-stack name="defaultCustomerLoginStack">
				<interceptor-ref name="customer_login" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		</interceptors>
		<!-- デフォルトのinterceptorを、defaultCustomerLoginStackに設定 -->
		<default-interceptor-ref name="defaultCustomerLoginStack" />
		<!-- 「return "login"」「return "mainmenu"」に対して、固定のＵＲＬを定義 -->
		<global-results>
			<result name="customer_login">/customer/index.jsp</result>
			<result name="mainmenu" type="redirect">mainMenu.action</result>
		</global-results>
		<!-- actionタグは記述不要 -->
	</package>


</struts>
