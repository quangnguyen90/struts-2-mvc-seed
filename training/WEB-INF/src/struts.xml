<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>

	<constant name="struts.action.extension" value="html" />
	<constant name="struts.enable.DynamicMethodInvocation" value="false" />
	<constant name="struts.devMode" value="true" />
	
	<!-- struts2-convention-plugin-*.jar : plugin auto find action if it is not be declared in struts.xml  -->
	<constant name="struts.convention.action.suffix" value="Action" />
	<constant name="struts.convention.package.locators" value="action, actions, struts, struts2" />
	
	<!-- Plugin to load multiple language -->
	<constant name="struts.custom.i18n.resources" value="messages" />

	<constant name="struts.ui.theme" value="simple" />
	<constant name="struts.configuration.xml.reload" value="true" />
	<constant name="struts.codebehind.defaultPackage" value="master_login" />
	
	<package name="master_tiles" namespace="/master" extends="struts-default">
		<result-types>
			<result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
		</result-types>
	</package>
	
	<package name="master_login" namespace="/master" extends="master_tiles">		
		<interceptors>
			<!-- LoginMasterInterceptorクラスに対して「login」と名前を定義 -->
			<interceptor name="master_login" class="controllers.interceptors.LoginMasterInterceptor" />
			<!-- LoginMasterInterceptorとStruts標準のdefaultStackを 足し合わせた新しい「defaultMasterLoginStack」を定義 -->
			<interceptor-stack name="defaultMasterLoginStack">
				<interceptor-ref name="master_login" />
				<interceptor-ref name="fileUpload">
					<param name="maximumSize">2097152</param>
					<param name="allowedTypes">image/png</param>
				</interceptor-ref>
				<interceptor-ref name="defaultStack" />				
			</interceptor-stack>
		</interceptors>
		<!-- デフォルトのinterceptorを、defaultMasterLoginStackに設定 -->
		<default-interceptor-ref name="defaultMasterLoginStack" />
		<!-- 「return "login"」「return "mainmenu"」に対して、固定のＵＲＬを定義 -->		
		
		<global-results>
			<!-- <result name="master_login" type="tiles">tiles.A_3</result> -->
			<result name="master_login">/views/auth/login.jsp</result>
		</global-results>
		<!-- actionタグは記述不要 -->
	</package>
	
	<package name="home_page" namespace="/welcome" extends="master_tiles">
		<action name="home" class="models.actions.home.HomeAction" method="welcome"></action>
	</package>
</struts>
